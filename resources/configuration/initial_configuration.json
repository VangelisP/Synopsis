[
  {
    "Label": "Total Lifetime Contributions",
    "MName": "",
    "DataType": "Money",
    "SelectRef": "none",
    "Query": "SELECT IF(SUM(t1.total_amount) IS NULL, 0, SUM(t1.total_amount))\nFROM civicrm_contribution t1 \nWHERE t1.contact_id = {contact_id} AND\nt1.contribution_status_id = 1 AND t1.is_test = 0 AND\nt1.financial_type_id IN ({financial_types})",
    "Optgroup": "fundraising",
    "Graph": false,
    "Remove": false,
    "CFID": 0,
    "Weight": "",
    "column_name": ""
  },
  {
    "Label": "Total Contributions in the Last 12 Months",
    "MName": "",
    "DataType": "Money",
    "SelectRef": "none",
    "Query": "SELECT COALESCE(SUM(t1.total_amount),0)\nFROM civicrm_contribution t1\nWHERE CAST(receive_date AS DATE) BETWEEN DATE_SUB(NOW(), INTERVAL 12 MONTH) AND NOW()\nAND t1.contact_id = {contact_id} AND\nt1.contribution_status_id = 1 AND t1.financial_type_id IN ({financial_types}) AND t1.is_test = 0",
    "Optgroup": "fundraising",
    "Graph": false,
    "Remove": false,
    "CFID": 0,
    "Weight": "",
    "column_name": ""
  },
  {
    "Label": "Total Contributions this Fiscal Year",
    "MName": "",
    "DataType": "Money",
    "SelectRef": "none",
    "Query": "SELECT COALESCE(SUM(t1.total_amount),0)\nFROM civicrm_contribution t1\nWHERE CAST(receive_date AS DATE) \nBETWEEN \"{current_fiscal_year_begin}\" AND \"{current_fiscal_year_end}\" AND t1.contact_id = {contact_id} \nAND t1.contribution_status_id = 1 \nAND t1.financial_type_id IN ({financial_types}) \nAND t1.is_test = 0",
    "Optgroup": "fundraising",
    "Graph": false,
    "Remove": false,
    "CFID": 0,
    "Weight": "",
    "column_name": ""
  },
  {
    "Label": "Total Deductible Contributions this Fiscal Year",
    "MName": "",
    "DataType": "Money",
    "SelectRef": "none",
    "Query": "SELECT COALESCE(SUM(line_total),0) - COALESCE(SUM(qty * COALESCE(t3.non_deductible_amount, 0)), 0)\n      FROM civicrm_contribution t1 JOIN civicrm_financial_type t2 ON\n      t1.financial_type_id = t2.id AND is_deductible = 1\n      JOIN civicrm_line_item t3 ON t1.id = t3.contribution_id\n      WHERE CAST(receive_date AS DATE) BETWEEN \"{current_fiscal_year_begin}\" AND\n      \"{current_fiscal_year_end}\" AND t1.contact_id IN ({contact_id}) AND\n      t1.contribution_status_id = 1 AND t3.financial_type_id IN (1,2,3,4,5,6,7,8) AND t1.is_test = 0",
    "Optgroup": "fundraising",
    "Graph": false,
    "Remove": false,
    "CFID": 0,
    "Weight": "",
    "column_name": ""
  },
  {
    "Label": "Total Contributions last Fiscal Year",
    "MName": "",
    "DataType": "Money",
    "SelectRef": "none",
    "Query": "SELECT COALESCE(SUM(t1.total_amount),0)\nFROM civicrm_contribution t1\nWHERE CAST(receive_date AS DATE) BETWEEN \"{last_fiscal_year_begin}\"\nAND \"{last_fiscal_year_end}\" \nAND t1.contact_id = {contact_id} AND\nt1.contribution_status_id = 1 \nAND t1.financial_type_id IN ({financial_types}) \nAND t1.is_test = 0",
    "Optgroup": "fundraising",
    "Graph": false,
    "Remove": false,
    "CFID": 0,
    "Weight": "",
    "column_name": ""
  },
  {
    "Label": "Total Deductible Contributions last Fiscal Year",
    "MName": "",
    "DataType": "Money",
    "SelectRef": "none",
    "Query": "SELECT COALESCE(SUM(line_total),0) - COALESCE(SUM(qty * COALESCE(t3.non_deductible_amount, 0)), 0)\nFROM civicrm_contribution t1 JOIN civicrm_financial_type t2 ON\nt1.financial_type_id = t2.id AND is_deductible = 1\nJOIN civicrm_line_item t3 ON t1.id = t3.contribution_id\nWHERE CAST(receive_date AS DATE) BETWEEN \"{last_fiscal_year_begin}\" AND\n \"{last_fiscal_year_end}\" AND t1.contact_id IN ({contact_id}) AND\nt1.contribution_status_id = 1 AND t3.financial_type_id IN ({financial_types}) AND t1.is_test = 0",
    "Optgroup": "fundraising",
    "Graph": false,
    "Remove": false,
    "CFID": 0,
    "Weight": "",
    "column_name": ""
  },
  {
    "Label": "Total Contributions Fiscal Year Before Last",
    "MName": "",
    "DataType": "Money",
    "SelectRef": "none",
    "Query": "SELECT COALESCE(SUM(t1.total_amount),0)\nFROM civicrm_contribution t1\nWHERE CAST(receive_date AS DATE) BETWEEN \"{year_before_last_fiscal_year_begin}\"\nAND \"{year_before_last_fiscal_year_end}\"\n AND t1.contact_id = {contact_id} \nAND t1.contribution_status_id = 1 \nAND t1.financial_type_id IN ({financial_types}) \nAND t1.is_test = 0",
    "Optgroup": "fundraising",
    "Graph": false,
    "Remove": false,
    "CFID": 0,
    "Weight": "",
    "column_name": ""
  },
  {
    "Label": "Total Deductible Contributions Fiscal Year Before Last",
    "MName": "",
    "DataType": "Money",
    "SelectRef": "none",
    "Query": "SELECT COALESCE(SUM(line_total),0) - COALESCE(SUM(qty * COALESCE(t3.non_deductible_amount, 0)), 0)\nFROM civicrm_contribution t1 JOIN civicrm_financial_type t2 ON\nt1.financial_type_id = t2.id AND is_deductible = 1\nJOIN civicrm_line_item t3 ON t1.id = t3.contribution_id\nWHERE CAST(receive_date AS DATE) BETWEEN \"{year_before_last_fiscal_year_begin}\" AND\n\"{year_before_last_fiscal_year_end}\" AND t1.contact_id IN ({contact_id}) AND\nt1.contribution_status_id = 1 AND t3.financial_type_id IN ({financial_types}) AND t1.is_test = 0",
    "Optgroup": "fundraising",
    "Graph": false,
    "Remove": false,
    "CFID": 0,
    "Weight": "",
    "column_name": ""
  },
  {
    "Label": "Amount of last contribution",
      "MName": "",
    "DataType": "Money",
    "SelectRef": "none",
    "Query": "SELECT COALESCE(total_amount,0)\nFROM civicrm_contribution t1\nWHERE t1.contact_id = {contact_id}\nAND t1.contribution_status_id = 1 \nAND t1.financial_type_id IN ({financial_types}) \nAND t1.is_test = 0 \nORDER BY t1.receive_date DESC LIMIT 1",
    "Optgroup": "fundraising",
    "Graph": false,
    "Remove": false,
      "CFID": 0,
      "Weight": "",
      "column_name": ""
  },
  {
    "Label": "Date of Last Contribution",
    "MName": "",
    "DataType": "Date",
    "SelectRef": "none",
    "Query": "SELECT MAX(t1.receive_date) FROM civicrm_contribution t1\nWHERE t1.contact_id = {contact_id} AND t1.contribution_status_id = 1 \nAND t1.financial_type_id IN ({financial_types}) AND t1.is_test = 0",
    "Optgroup": "fundraising",
    "Graph": false,
    "Remove": false,
    "CFID": 0,
    "Weight": "",
    "column_name": ""
  },
  {
    "Label": "Amount of first contribution",
    "MName": "",
    "DataType": "Money",
    "SelectRef": "none",
    "Query": "SELECT COALESCE(total_amount,0)\nFROM civicrm_contribution t1\nWHERE t1.contact_id = {contact_id}\nAND t1.contribution_status_id = 1 \nAND t1.financial_type_id IN ({financial_types})\nAND t1.is_test = 0 ORDER BY t1.receive_date ASC LIMIT 1",
    "Optgroup": "fundraising",
    "Graph": false,
    "Remove": false,
    "CFID": 0,
    "Weight": "",
    "column_name": ""
  },
  {
    "Label": "Date of First Contribution",
    "MName": "",
    "DataType": "Date",
    "SelectRef": "none",
    "Query": "SELECT MIN(t1.receive_date) FROM civicrm_contribution t1\nWHERE t1.contact_id = {contact_id} AND t1.contribution_status_id = 1 \nAND t1.financial_type_id IN ({financial_types}) AND t1.is_test = 0",
    "Optgroup": "fundraising",
    "Graph": false,
    "Remove": false,
    "CFID": 0,
    "Weight": "",
    "column_name": ""
  },
  {
    "Label": "Campaign of first contribution",
    "MName": "",
    "DataType": "Selector",
    "SelectRef": "campaign",
    "Query": "SELECT t1.campaign_id FROM civicrm_contribution t1\nWHERE t1.contact_id = {contact_id} AND t1.contribution_status_id = 1 \nAND t1.financial_type_id IN ({financial_types}) AND t1.is_test = 0\norder by receive_date asc limit 1",
    "Optgroup": "fundraising",
    "Graph": false,
    "Remove": false,
    "CFID": 0,
    "Weight": "",
    "column_name": ""
  },
  {
    "Label": "Largest Contribution",
    "MName": "",
    "DataType": "Money",
    "SelectRef": "none",
    "Query": "SELECT COALESCE(MAX(t1.total_amount), 0)\nFROM civicrm_contribution t1\nWHERE t1.contact_id = {contact_id} \nAND t1.contribution_status_id = 1 \nAND t1.financial_type_id IN ({financial_types}) \nAND t1.is_test = 0",
    "Optgroup": "fundraising",
    "Graph": false,
    "Remove": false,
    "CFID": 0,
    "Weight": "",
    "column_name": ""
  },
  {
    "Label": "Count of contributions",
    "MName": "",
    "DataType": "String",
    "SelectRef": "none",
    "Query": "SELECT COALESCE(COUNT(t1.id), 0) FROM civicrm_contribution t1\nWHERE t1.contact_id = {contact_id} AND t1.contribution_status_id = 1 AND\nt1.financial_type_id IN ({financial_types}) AND t1.is_test = 0",
    "Optgroup": "fundraising",
    "Graph": false,
    "Remove": false,
    "CFID": 0,
    "Weight": "",
    "column_name": ""
  },
  {
    "Label": "Count of contributions last year",
    "MName": "",
    "DataType": "String",
    "SelectRef": "none",
    "Query": "SELECT COALESCE(COUNT(t1.id), 0) \nFROM civicrm_contribution t1\nWHERE t1.contact_id = {contact_id}\nAND t1.contribution_status_id = 1 AND\nt1.financial_type_id IN ({financial_types})  \nAND YEAR(t1.receive_date) = YEAR(DATE_SUB(CURDATE(), INTERVAL 1 YEAR))\nAND t1.is_test = 0",
    "Optgroup": "fundraising",
    "Graph": false,
    "Remove": false,
    "CFID": 0,
    "Weight": "",
    "column_name": ""
  },
  {
    "Label": "Count of contributions year before last year",
    "MName": "",
    "DataType": "String",
    "SelectRef": "none",
    "Query": "SELECT COALESCE(COUNT(t1.id), 0) \nFROM civicrm_contribution t1\nWHERE t1.contact_id = {contact_id}\nAND t1.contribution_status_id = 1 AND\nt1.financial_type_id IN ({financial_types})  \nAND YEAR(t1.receive_date) = YEAR(DATE_SUB(CURDATE(), INTERVAL 2 YEAR))\nAND t1.is_test = 0",
    "Optgroup": "fundraising",
    "Graph": false,
    "Remove": false,
    "CFID": 0,
    "Weight": "",
    "column_name": ""
  },
  {
    "Label": "Average Annual (Calendar Year) Contribution",
    "MName": "",
    "DataType": "Money",
    "SelectRef": "none",
    "Query": "SELECT IFNULL(ROUND(AVG(t0.total_amount),2) ,0)\nFROM civicrm_contribution t0\nWHERE t0.contact_id = {contact_id} \nAND t0.financial_type_id IN ({financial_types}) \nAND t0.contribution_status_id = 1 \nAND is_test = 0",
    "Optgroup": "fundraising",
    "Graph": false,
    "Remove": false,
    "CFID": 0,
    "Weight": "",
    "column_name": ""
  },
  {
    "Label": "Campaign of largest contribution",
    "MName": "",
    "DataType": "Selector",
    "SelectRef": "campaign",
    "Query": "SELECT t1.campaign_id\nFROM civicrm_contribution t1\nWHERE t1.contact_id = {contact_id}\nAND t1.contribution_status_id = 1 \nAND t1.financial_type_id IN ({financial_types}) \nAND t1.is_test = 0\nORDER BY t1.total_amount DESC\nLIMIT 1",
    "Optgroup": "fundraising",
    "Graph": false,
    "Remove": false,
    "CFID": 0,
    "Weight": "",
    "column_name": ""
  }
]
